(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{40:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(16),a=t.n(c),r=t(7),o=t(3),u=t(2),i=t(4),s=t.n(i),d="http://localhost:3001/api/persons",l=function(){return s.a.get(d).then((function(e){return e.data}))},j=function(e){return s.a.post(d,e).then((function(e){return e.data}))},b=function(e){var n=s.a.get("".concat(d,"/").concat(e));return s.a.delete("".concat(d,"/").concat(e),n)},h=function(e,n){return s.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},f=(t(40),t(0)),m=function(e){return Object(f.jsxs)("form",{onSubmit:e.addPerson,children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(f.jsxs)("div",{children:["number: ",Object(f.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})},O=function(e){return Object(f.jsxs)("div",{children:["filter shown with ",Object(f.jsx)("input",{value:e.filter,onChange:e.handleFilterChange})]})},p=function(e){return Object(f.jsx)("div",{children:e.persons.filter((function(n){return n.name.toLowerCase().includes(e.filter)})).map((function(n){return Object(f.jsxs)("div",{children:[Object(f.jsxs)("p",{children:[n.name," ",n.number]}),Object(f.jsx)("button",{onClick:function(){return e.deletePerson(n.name,n.id)},children:"delete"})]},n.id)}))})},v=function(e){var n=e.message;return null===n||""===n?null:Object(f.jsx)("div",{className:"success",children:n})},x=function(e){var n=e.message;return null===n||""===n?null:Object(f.jsx)("div",{className:"error",children:n})},g=function(){var e=Object(u.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],a=Object(u.useState)(""),i=Object(o.a)(a,2),s=i[0],d=i[1],g=Object(u.useState)(""),w=Object(o.a)(g,2),N=w[0],C=w[1],P=Object(u.useState)(""),S=Object(o.a)(P,2),k=S[0],y=S[1],E=Object(u.useState)(""),F=Object(o.a)(E,2),J=F[0],B=F[1],D=Object(u.useState)(""),I=Object(o.a)(D,2),L=I[0],R=I[1];Object(u.useEffect)((function(){l().then((function(e){c(e)}))}),[]);var T=function(e,n){if(window.confirm("".concat(e.name," is already added to phonebook, replace the old number with a new one?"))){var a=Object(r.a)(Object(r.a)({},e),{},{number:n});h(e.id,a).then((function(n){c(t.map((function(t){return t.id!==e.id?t:n}))),d(""),C(""),B("Number of person '".concat(a.name,"' has been succesfully changed "))})).catch((function(n){R("Person '".concat(e.name,"' was already removed from server")),setTimeout((function(){R(null)}),5e3),c(t.filter((function(n){return n.id!==e.id})))}))}};return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(v,{message:J}),Object(f.jsx)(x,{message:L}),Object(f.jsx)(O,{filter:k,handleFilterChange:function(e){y(e.target.value)}}),Object(f.jsx)("h3",{children:"add a new"}),Object(f.jsx)(m,{addPerson:function(e){if(e.preventDefault(),t.some((function(e){return e.name===s})))if(""===N)window.alert("".concat(s," is already added to phonebook"));else{var n=t.find((function(e){return e.name===s}));T(n,N)}else{var a={name:s,number:N};j(a).then((function(e){c(t.concat(e)),d(""),C(""),B("Person '".concat(a.name,"' added"))}))}},newName:s,newNumber:N,handleNameChange:function(e){d(e.target.value)},handleNumberChange:function(e){C(e.target.value)}}),Object(f.jsx)("h3",{children:"Numbers"}),Object(f.jsx)(p,{persons:t,filter:k,deletePerson:function(e,n){window.confirm("delete ".concat(e,"?"))&&(b(n),B("Person '".concat(e,"' has been deleted. Refresh page in order to see changes ")))}})]})};a.a.render(Object(f.jsx)(g,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.ec845ffe.chunk.js.map